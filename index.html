<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>SnowballEODs Items</title>
  <!-- Required scripts -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.2/angular.min.js"></script>
  <!-- Data files -->
  <!-- For local testing use file:/// and forward slashes, and turn off security.fileuri.strict_origin_policy in Firefox -->
  <script type="text/javascript">
    const commandModListURL    = "https://raw.githubusercontent.com/snowballeod/item-list/master/SiteCommandsModerator.json";
    const commandViewerListURL = "https://raw.githubusercontent.com/snowballeod/item-list/master/SiteCommandsViewer.json";
    const commandPawnListURL   = "https://raw.githubusercontent.com/snowballeod/item-list/master/SiteCommandsPawn.json";
    const storeItemListURL     = "https://raw.githubusercontent.com/snowballeod/item-list/master/StoreItems.json";
    const storeEventListURL    = "https://raw.githubusercontent.com/snowballeod/item-list/master/StoreEvents.json";
    const storeTraitVanillaURL = "https://raw.githubusercontent.com/snowballeod/item-list/master/StoreTraitsVanilla.json";
    const storeTraitMagicURL   = "https://raw.githubusercontent.com/snowballeod/item-list/master/StoreTraitsMagic.json";
  </script>
</head>

<body>
  <header>
    <a class="header-brand" href="#">SnowballEOD</a>
    <div class="header-flex">
      <ul class="header-list">
        <li>
          <a class="header-link" href="https://www.twitch.tv/snowballeod">My Stream</a>
        </li>
      </ul>
    </div>
  </header>
  <main>
    <div class="container">
      <div class="intro">
        <h1>TwitchToolkit</h1>
        <p>TwitchToolkit is a mod written by <a href="http://www.twitch.tv/hodlhodl">hodlhodl</a> that integrates storytelling decisions into chat votes, awards viewers coins for watching, and those coins can be spent on items/events in game.</p>
      </div>
      <div class="commands">
        <div class="command-tabs">
          <button class="command-tab-link" id="defaultCommand" onclick="switchCommands(event, 'ViewerCommands')">Viewer</button>
          <button class="command-tab-link" onclick="switchCommands(event, 'PawnCommands')">Pawn</button>
          <button class="command-tab-link" onclick="switchCommands(event, 'ModCommands')">Mod</button>
        </div>
        <div id="ViewerCommands" class="command-tab-content">
          <table class="command-table">
            <tbody class="list">
            </tbody>
          </table>
        </div>
        <div id="PawnCommands" class="command-tab-content">
          <table class="command-table">
            <tbody class="list">
            </tbody>
          </table>
        </div>
        <div id="ModCommands" class="command-tab-content">
          <table class="command-table">
            <tbody class="list">
            </tbody>
          </table>
        </div>
      </div>
      <div class="stores">
        <div class="store-tabs">
          <button class="store-tab-link items-tab" id="defaultStore" onclick="switchStores(event, 'ItemsStore')">Items</button>
          <button class="store-tab-link events-tab" onclick="switchStores(event, 'EventsStore')">Events</button>
          <button class="store-tab-link vanilla-traits-tab" onclick="switchStores(event, 'VanillaTraitsStore')">Vanilla Traits</button>
          <button class="store-tab-link magic-traits-tab" onclick="switchStores(event, 'MagicTraitsStore')">Magic Traits</button>
        </div>
      </div>
      <div id="ItemsStore" class="store-tab-content">
        <div class="input-group">
          <div class="input-span">
            <span id="searchInput" class="search-span">Search</span>
          </div>
          <input class="search" type="text" aria-label="Search" aria-describedby="searchInput">
        </div>
        <table class="store-table">
          <tr>
            <th scope="col" class="sort" data-sort="name">Name</th>
            <th scope="col" class="sort" data-sort="price">Price</th>
            <th scope="col" class="sort" data-sort="category">Category</th>
          </tr>
          <tbody class="list">
          </tbody>
        </table>
      </div>
      <div id="EventsStore" class="store-tab-content">
        <div class="input-group">
          <div class="input-span">
            <span id="searchInput" class="search-span">Search</span>
          </div>
          <input class="search" type="text" aria-label="Search" aria-describedby="searchInput">
        </div>
        <table class="store-table">
          <tr>
            <th scope="col" class="sort" data-sort="name">Name</th>
            <th scope="col" class="sort" data-sort="price">Price</th>
            <th scope="col" class="sort" data-sort="karmatype">Karma</th>
          </tr>
          <tbody class="list">
          </tbody>
        </table>
      </div>
      <div id="VanillaTraitsStore" class="store-tab-content">
        <div class="input-group">
          <div class="input-span">
            <span id="searchInput" class="search-span">Search</span>
          </div>
          <input class="search" type="text" aria-label="Search" aria-describedby="searchInput">
        </div>
        <table class="store-table">
          <tr>
            <th scope="col" class="sort" data-sort="name">Name</th>
            <th scope="col" class="sort" data-sort="price">Price</th>
            <th scope="col" class="sort" data-sort="description">Description</th>
            <th scope="col" class="sort" data-sort="attributes">Attributes</th>
          </tr>
          <tbody class="list">
          </tbody>
        </table>
      </div>
      <div id="MagicTraitsStore" class="store-tab-content">
        <div class="input-group">
          <div class="input-span">
            <span id="searchInput" class="search-span">Search</span>
          </div>
          <input class="search" type="text" aria-label="Search" aria-describedby="searchInput">
        </div>
        <table class="store-table">
          <tr>
            <th scope="col" class="sort" data-sort="name">Name</th>
            <th scope="col" class="sort" data-sort="price">Price</th>
            <th scope="col" class="sort" data-sort="description">Description</th>
            <th scope="col" class="sort" data-sort="attributes">Attributes</th>
          </tr>
          <tbody class="list">
          </tbody>
        </table>
      </div>
    </div>
  </main>
  <footer>
    <div>
      <p>
        <a class="footer-link" href="#">Back to top</a>
      </p>
    </div>
  </footer>

  <style>
    body {
      color: #212529;
      font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
      font-size: 1rem;
      font-weight: 400;
      line-height: 1.5;
      margin: 0;
      text-align: left;
    }

    header {
      align-items: center;
      background-color: #343A40;
      display: flex;
      flex-flow: row nowrap;
      justify-content: flex-start;
      left: 0;
      padding: .5rem 1rem;
      position: fixed;
      right: 0;
      top: 0;
      z-index: 100;
      -webkit-box-align: center;
      -webkit-box-direction: normal;
      -webkit-box-orient: horizontal;
      -webkit-box-pack: start;
    }

    main {
      background-color: #F6F6F9;
    }

    h1 {
      color: inherit;
      font-size: 4.5rem;
      font-weight: 300;
      line-height: 1.2;
      margin-top: 0;
      margin-bottom: .5rem;
    }

    p {
      margin-bottom: 0;
      margin-top: 0;
    }

    ul {
      margin-bottom: 0;
      margin-top: 0;
      padding-left: .75rem;
    }

    li {
      white-space: nowrap;
    }

    table {
      border-spacing: 0;
      width: 100%;
    }

    th {
      background-color: #DFDFDF;
      border-top-left-radius: .2em;
      border-top-right-radius: .2em;
      cursor: pointer;
      padding: .75rem 1.5rem;
      vertical-align: top;
    }

    footer {
      background-color: #343A40;
      display: flex;
      justify-content: flex-end;
      padding: 1rem;
    }

    *, ::after, ::before {
      box-sizing: border-box;
    }

    .header-brand {
      color: #FFFFFF;
      display: inline-block;
      font-size: 1.25rem;
      margin-right: 1rem;
      padding-bottom: .3125rem;
      padding-top: .3125rem;
      text-decoration: none;
    }

      .header-brand:hover {
        text-decoration: none;
      }

    .header-flex {
      align-items: center;
      display: flex;
      flex-basis: auto;
      flex-grow: 1;
      margin-left: 8px;
      -webkit-box-align: center;
      -webkit-box-flex: 1;
    }

    .header-list {
      display: flex;
      flex-direction: row;
      list-style: none;
      padding-left: 0;
      -webkit-box-orient: horizontal;
      -webkit-box-direction: normal;
    }

    .header-link {
      color: #9A9DA0;
      padding-right: .5rem;
      padding-left: .5rem;
      text-decoration: none;
    }

      .header-link:hover {
        color: #CCCECF;
        text-decoration: none;
      }

    .container {
      padding: 4rem 2rem;
    }

    .intro, .commands, .stores {
      margin-bottom: 1rem;
      margin-left: auto;
      margin-right: auto;
      max-width: 1200px;
      padding-left: 15px;
      padding-right: 15px;
      width: 100%;
    }

    .command-tabs {
      overflow: hidden;
    }

      .command-tabs button {
        background-color: #DFDFDF;
        border-bottom: 0;
        border-left: 1px solid #DFDFDF;
        border-right: 1px solid #DFDFDF;
        border-top: 1px solid #DFDFDF;
        border-top-left-radius: .2em;
        border-top-right-radius: .2em;
        cursor: pointer;
        float: left;
        font-size: 1rem;
        outline: none;
        padding: .75rem 2rem;
        position: relative;
        z-index: 0;
      }

        .command-tabs button:hover {
          background-color: #CCCCCC;
          border-left: 1px solid #CCCCCC;
          border-right: 1px solid #CCCCCC;
          border-top: 1px solid #CCCCCC;
        }

        .command-tabs button.active {
          background-color: #FFFFFF;
          border-left: 1px solid #CCCCCC;
          border-right: 1px solid #CCCCCC;
          border-top: 1px solid #CCCCCC;
          z-index: 2;
        }

    .command-tab-content {
      display: none;
      margin-top: -1px;
      position: relative;
      z-index: 1;
    }

    .command-table td,
    .store-table td {
      background-color: #FFFFFF;
      border-bottom: 0;
      border-left: 1px solid #CCCCCC;
      border-right: 0;
      border-top: 1px solid #CCCCCC;
      padding: .75rem 1.5rem;
    }

    .command-table tr:last-child td,
    .store-table tr:last-child td {
      border-bottom: 1px solid #CCCCCC;
    }

    .command-table tr td:last-child,
    .store-table tr td:last-child {
      border-right: 1px solid #CCCCCC;
    }

    /*.command-table tr:first-child td:first-child,
    .store-table tr:first-child td:first-child {
      border-top-left-radius: .2em;
    }*/

    .command-table tr:first-child td:last-child /*,
    .store-table tr:first-child td:last-child*/ {
      border-top-right-radius: .2em;
    }

    .command-table tr:last-child td:first-child,
    .store-table tr:last-child td:first-child {
      border-bottom-left-radius: .2em;
    }

    .command-table tr:last-child td:last-child,
    .store-table tr:last-child td:last-child {
      border-bottom-right-radius: .2em;
    }

    .store-tabs {
      margin-left: -3px;
      overflow: hidden;
    }

      .store-tabs button {
        background-color: transparent;
        border: none;
        border-radius: .2rem;
        cursor: pointer;
        float: left;
        font-size: 1rem;
        margin: 3px;
        outline: none;
        padding: .75rem 2rem;
      }

        .store-tabs button.items-tab {
          background-color: #218838;
          color: #FFFFFF;
        }

          .store-tabs button.items-tab:hover {
            background-color: #1A702D !important;
          }

          .store-tabs button.items-tab.active {
            background-color: #218838;
            box-shadow: 0 0 0 .2rem rgba(33,136,56,.4);
          }

        .store-tabs button.events-tab {
          background-color: #0069D9;
          color: #FFFFFF;
        }

          .store-tabs button.events-tab:hover {
            background-color: #0056B2 !important;
          }

          .store-tabs button.events-tab.active {
            background-color: #0069D9;
            box-shadow: 0 0 0 .2rem rgba(0,105,217,.4);
          }

        .store-tabs button.vanilla-traits-tab {
          background-color: #FF5500;
          color: #FFFFFF;
        }

          .store-tabs button.vanilla-traits-tab:hover {
            background-color: #CC3D00 !important;
          }

          .store-tabs button.vanilla-traits-tab.active {
            background-color: #FF5500;
            box-shadow: 0 0 0 .2rem rgba(255,85,0,.4);
          }

        .store-tabs button.magic-traits-tab {
          background-color: #A103FC;
          color: #FFFFFF;
        }

          .store-tabs button.magic-traits-tab:hover {
            background-color: #8204CC !important;
          }

          .store-tabs button.magic-traits-tab.active {
            background-color: #A103FC;
            box-shadow: 0 0 0 .2rem rgba(161,3,252,.4);
          }

    .store-tab-content {
        padding-left: 15px;
        padding-right: 15px;
    }

    .input-group {
      align-items: stretch;
      display: flex;
      flex-wrap: wrap;
      position: relative;
      width: 100%;
      -webkit-box-align: stretch;
    }

    .input-span {
      display: flex;
    }

    .search-span {
      background-color: #E9ECEF;
      border-bottom: 1px solid #CED4DA;
      border-left: 1px solid #CED4DA;
      border-top: 1px solid #CED4DA;
      border-top-left-radius: .2rem;
      border-bottom-left-radius: .2rem;
      color: #495057;
      font-size: .875rem;
      line-height: 1.5;
      padding: .25rem .5rem;
    }

    .search {
      border: 1px solid #CED4DA;
      border-top-right-radius: .2rem;
      border-bottom-right-radius: .2rem;
      flex: 1 1 auto;
      margin-bottom: 0;
      padding: .25rem .5rem;
      position: relative;
      width: 1%;
      -webkit-box-flex: 1;
    }

    .store-table {
      margin-top: 1rem;
    }

    .footer-link {
      color: #FFFFFF;
      text-decoration: none;
    }

      .footer-link:hover {
        color: #CCCECF;
        text-decoration: none;
      }
  </style>

  <script type="text/javascript">
    // Viewer command table populator
    let commandViewerList = null;
    $.getJSON(commandViewerListURL, function (data) {

      // Value names should match the json property names
      // Table data class names should match value names
      var options = {
        valueNames: ['usage', 'description'],
        item: '<tr><td class="usage" scope="row"></td><td class="description"></td></tr>'
      };

      // String name for new list should match the div id containing the table
      // Property name on data should match the json property name for the list of entries
      commandViewerList = new List('ViewerCommands', options, data.commands);
    });

    // Pawn command table populator
    let commandPawnList = null;
    $.getJSON(commandPawnListURL, function (data) {

      // Value names should match the json property names
      // Table data class names should match value names
      var options = {
        valueNames: ['usage', 'description'],
        item: '<tr><td class="usage" scope="row"></td><td class="description"></td></tr>'
      };

      // String name for new list should match the div id containing the table
      // Property name on data should match the json property name for the list of entries
      commandPawnList = new List('PawnCommands', options, data.commands);
    });

    // Moderator command table populator
    let commandModList = null;
    $.getJSON(commandModListURL, function (data) {

      // Value names should match the json property names
      // Table data class names should match value names
      var options = {
        valueNames: ['usage', 'description'],
        item: '<tr><td class="usage" scope="row"></td><td class="description"></td></tr>'
      };

      // String name for new list should match the div id containing the table
      // Property name on data should match the json property name for the list of entries
      commandModList = new List('ModCommands', options, data.commands);
    });

    // Items store table populator
    let storeItemsList = null;
    $.getJSON(storeItemListURL, function (data) {

      // Value names should match the json property names
      // Table data class names should match value names
      var options = {
        valueNames: ['name', 'price', 'category'],
        item: '<tr><td class="name" scope="row"></td><td class="price"></td><td class="category"></td></tr>'
      };

      // String name for new list should match the div id containing the table
      // Property name on data should match the json property name for the list of entries
      storeItemsList = new List('ItemsStore', options, data.items);
    });

    // Events store table populator
    let storeEventsList = null;
    $.getJSON(storeEventListURL, function (data) {

      // Value names should match the json property names
      // Table data class names should match value names
      var options = {
        valueNames: ['name', 'price', 'karmatype'],
        item: '<tr><td class="name" scope="row"></td><td class="price"></td><td class="karmatype"></td></tr>'
      };

      // String name for new list should match the div id containing the table
      // Property name on data should match the json property name for the list of entries
      storeEventsList = new List('EventsStore', options, data.events);
    });

    // Vanilla traits store table populator
    let storeVanillaTraitsList = null;
    $.getJSON(storeTraitVanillaURL, function (data) {

      // Value names should match the json property names
      // Table data class names should match value names
      var options = {
        valueNames: ['name', 'description', 'attributes', 'price'],
        item: '<tr><td class="name" scope="row"></td><td class="price"></td><td class="description"></td><td class="attributes"></td></tr>'
      };

      $.each(data.traits, function (index, value) {
        var list = '<ul class="attributes-list">';

        for (var i = 0; i < value.attributes.length; i++) {
          list += '<li class="attribute-item">' + value.attributes[i] + '</li>';
        }

        list += '</ul>';

        value.attributes = list;
      });

      // String name for new list should match the div id containing the table
      // Property name on data should match the json property name for the list of entries
      storeVanillaTraitsList = new List('VanillaTraitsStore', options, data.traits);
    });

    // Magic traits store table populator
    let storeMagicTraitsList = null;
    $.getJSON(storeTraitMagicURL, function (data) {

      // Value names should match the json property names
      // Table data class names should match value names
      var options = {
        valueNames: ['name', 'description', 'attributes', 'price'],
        item: '<tr><td class="name" scope="row"></td><td class="price"></td><td class="description"></td><td class="attributes"></td></tr>'
      };

      $.each(data.traits, function (index, value) {
        var list = '<ul class="attributes-list">';

        for (var i = 0; i < value.attributes.length; i++) {
          list += '<li class="attribute-item">' + value.attributes[i] + '</li>';
        }

        list += '</ul>';

        value.attributes = list;
      });

      // String name for new list should match the div id containing the table
      // Property name on data should match the json property name for the list of entries
      storeMagicTraitsList = new List('MagicTraitsStore', options, data.traits);
    });

    // Select the default tabs
    document.getElementById("defaultCommand").click();
    document.getElementById("defaultStore").click();

    // Command tab switcher
    function switchCommands(evt, commandType) {
      var i;

      // Get all content elements and hide them
      var tabcontent = document.getElementsByClassName("command-tab-content");
      for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
      }

      // Get all link elements and remove the class "active"
      var tablinks = document.getElementsByClassName("command-tab-link");
      for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }

      // Show the current tab, and add an "active" class to the button that opened the tab
      var tabcontainer = document.getElementById(commandType);
      tabcontainer.style.display = "block";
      evt.currentTarget.className += " active";
    }

    // Store tab switcher
    function switchStores(evt, storeType) {
      var i;

      // Get all content elements and hide them
      var tabcontent = document.getElementsByClassName("store-tab-content");
      for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
      }

      // Get all link elements and remove the class "active"
      var tablinks = document.getElementsByClassName("store-tab-link");
      for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }

      // Show the current tab, and add an "active" class to the button that opened the tab
      document.getElementById(storeType).style.display = "block";
      evt.currentTarget.className += " active";
    }
  </script>
</body>

</html>
